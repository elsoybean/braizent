{
  "skill": "suggest-meal",
  "test_cases": [
    {
      "test_id": "suggest-meal-01-quick",
      "description": "Tuesday weeknight dinner - Quick Pick mode (Haiku)",
      "mode": "quick",
      "inputs": {
        "meal_slot": "Tuesday dinner",
        "date": "2026-01-13",
        "people": 2,
        "time_available": "60 min max",
        "context": {
          "recent_meals": {
            "Monday": "Chicken and Dumplings (American)"
          },
          "Wednesday": "Board gaming - already planned",
          "profile": "/Users/cmlee/meals/PROFILE.md"
        }
      },
      "validation_checks": {
        "recipe_selection": {
          "search_tags": ["weeknight", "under-60-min"],
          "exclude": ["chicken (avoid repetition)"],
          "preference": "German/French/Italian/East Asian staples"
        },
        "side_suggestions": {
          "method": "Template-based (cuisine â†’ sides mapping)",
          "example_german": "Roasted potatoes + green beans OR cabbage",
          "example_italian": "Pasta OR polenta + salad",
          "example_asian": "Rice + stir-fried vegetables"
        },
        "profile_adherence": {
          "no_spicy": true,
          "prefer_pork_or_chicken": true,
          "beef_rare": true
        }
      },
      "expected_model": "haiku",
      "quality_threshold": 0.90,
      "expected_cost": [0.10, 0.15]
    },
    {
      "test_id": "suggest-meal-01-smart",
      "description": "Same scenario - Smart Suggestion mode (Sonnet 3.5)",
      "mode": "smart",
      "inputs": {
        "meal_slot": "Tuesday dinner",
        "date": "2026-01-13",
        "people": 2,
        "time_available": "60 min max",
        "context": {
          "recent_meals": {
            "Monday": "Chicken and Dumplings (American)"
          },
          "Wednesday": "Board gaming - already planned",
          "profile": "/Users/cmlee/meals/PROFILE.md"
        }
      },
      "validation_checks": {
        "recipe_selection": {
          "context_awareness": [
            "Avoids chicken (recent)",
            "Suggests European cuisine (variety)",
            "Considers day-of-week (weeknight, not featured)"
          ]
        },
        "side_suggestions": {
          "method": "Context-aware with creativity",
          "checks_leftovers": "If carrots leftover from Monday, incorporate",
          "complementary_flavors": "Considers flavor pairing, not just cuisine"
        },
        "web_fallback": {
          "if_no_local_match": "Search web for recipes",
          "quality_assessment": "Evaluate sources"
        }
      },
      "expected_model": "sonnet-3.5",
      "quality_threshold": 0.95,
      "expected_cost": [0.80, 1.00]
    },
    {
      "test_id": "suggest-meal-02",
      "description": "Saturday featured dish - web fallback scenario",
      "mode": "smart",
      "inputs": {
        "meal_slot": "Saturday dinner",
        "date": "2026-01-17",
        "people": 2,
        "time_available": "2-3 hours",
        "special_request": "Try something new - Thai curry",
        "context": {
          "profile": "/Users/cmlee/meals/PROFILE.md",
          "cuisine_this_week": ["American", "German", "Italian"]
        }
      },
      "validation_checks": {
        "featured_dish_handling": {
          "recognize_non_staple": "Thai is not a staple cuisine",
          "featured_slot": "Should suggest as featured dish (1x per week)",
          "web_search": "Search for authentic Thai curry recipes"
        },
        "profile_adherence": {
          "spice_level": "Slightly spicy acceptable for Asian cuisine",
          "asian_market": "Note ingredients available at Asian Market",
          "skill_level": "Advanced techniques okay"
        }
      },
      "expected_model": "sonnet-3.5",
      "quality_threshold": 0.95,
      "expected_cost": [1.50, 2.00]
    },
    {
      "test_id": "suggest-meal-03",
      "description": "Wednesday board gaming - 5-7 people",
      "mode": "smart",
      "inputs": {
        "meal_slot": "Wednesday dinner",
        "date": "2026-01-14",
        "people": "5-7 (board gaming night)",
        "time_available": "flexible",
        "context": {
          "profile": "/Users/cmlee/meals/PROFILE.md",
          "note": "Profile mentions Wednesday guests sometimes vegetarian"
        }
      },
      "validation_checks": {
        "scaling": {
          "household_size": "Should scale from 2 to 5-7",
          "leftovers": "Consider leftover preferences"
        },
        "vegetarian_accommodation": {
          "consider": "Suggest vegetarian-friendly OR vegetarian main",
          "note": "Profile says occasionally feature vegetarian meal"
        },
        "crowd_friendly": {
          "tags": ["crowd-pleaser", "easy-to-serve"],
          "one_pot_preference": "Makes hosting easier"
        }
      },
      "expected_model": "sonnet-3.5",
      "quality_threshold": 0.95
    }
  ],
  "comparison_analysis": {
    "quick_vs_smart": {
      "use_quick_when": [
        "Routine weeknight meals",
        "User knows what they want",
        "Time-pressed planning"
      ],
      "use_smart_when": [
        "Special occasions",
        "Need variety/creativity",
        "Complex constraints (guests, dietary needs, etc.)"
      ]
    }
  },
  "optimization_targets": {
    "phase_2": {
      "quick_mode": {
        "model": "haiku",
        "features": [
          "Tag-based recipe search",
          "Template side dish pairing",
          "No web fallback"
        ],
        "expected_cost": [0.10, 0.15],
        "quality_threshold": 0.90
      },
      "smart_mode": {
        "model": "sonnet-3.5",
        "features": [
          "Context-aware ranking",
          "Creative side suggestions",
          "Web fallback if needed",
          "Side dish templates (C2 optimization)"
        ],
        "expected_cost": [0.80, 1.00],
        "quality_threshold": 0.95
      },
      "expected_savings": "Quick: 90%, Smart: 40-50%"
    }
  }
}
